(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},69:(e,t,n)=>{e.exports=n.p+"d5ef2da6440d001e1ca4.png"},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],o=0;o<e.length;o++){var l=e[o],c=r.base?l[0]+r.base:l[0],d=i[c]||0,h="".concat(c," ").concat(d);i[c]=d+1;var u=n(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var g=s(p,r);r.byIndex=o,t.splice(o,0,{identifier:h,updater:g,references:1})}a.push(h)}return a}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var i=r(e=e||[],s=s||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var o=n(i[a]);t[o].references--}for(var l=r(e,s),c=0;c<i.length;c++){var d=n(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=l}}},75:(e,t,n)=>{e.exports=n.p+"4602d8ee4cbb645d691b.gif"},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},290:(e,t,n)=>{e.exports=n.p+"3f8369cb27dbfd9d67b3.png"},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,s,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},339:(e,t,n)=>{e.exports=n.p+"de9a48fac82bb936cf86.gif"},365:(e,t,n)=>{n.d(t,{A:()=>M});var r=n(601),s=n.n(r),i=n(314),a=n.n(i),o=n(417),l=n.n(o),c=new URL(n(339),n.b),d=new URL(n(69),n.b),h=new URL(n(907),n.b),u=new URL(n(290),n.b),p=new URL(n(373),n.b),g=new URL(n(890),n.b),y=new URL(n(470),n.b),m=new URL(n(75),n.b),b=a()(s());b.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Micro+5&display=swap);"]);var f=l()(c),S=l()(d),v=l()(h),w=l()(u),x=l()(p),C=l()(g),E=l()(y),P=l()(m);b.push([e.id,`body {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    background-color: rgb(0, 0, 0);\n    font-family: "Micro 5", sans-serif;\n    font-size: 32px;\n    color: aliceblue;\n    background-image: url(${f});\n    background-size: cover;\n}\n\n/*Main Menu*/\n.main-menu {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: repeat(3, 1fr);\n}\n\n.menu-options-container {\n    width: 250px;\n    height: 130px;\n    grid-column: 1 / 2;\n    grid-row: 2 / 3;\n    display: flex;\n    flex-direction: column;\n    align-items: end;\n    gap: 8px;\n    padding-right: 16px;\n    align-self: center;\n    justify-self: center;\n    align-items: center;\n}\n\n.main-title {\n    font-size: 120px;\n    grid-column: 1 / 2;\n    grid-row: 1 / 2;\n    align-self: center;\n    justify-self: center;\n}\n\nbutton {\n    font-family: "Micro 5", sans-serif;\n    font-size: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 12px;\n    cursor: pointer;\n}\n\nbutton:hover {\n    background-color: rgb(102, 102, 102);\n}\n\n.play-btn {\n    width: 180px;\n    height: 40px;\n}\n\n.artist {\n    justify-self: center;\n}\n\na {\n    text-decoration: none;\n    color: aliceblue;\n}\n\na:hover {\n    color: rgb(66, 66, 66);\n}\n\n.hidden {\n    display: none;\n}\n\n/*Play Menu*/\n.play-menu {\n    display: grid;\n    grid-template-columns: 3fr 1fr;\n    grid-template-rows: 1fr 9fr 1fr 1fr 1fr;\n    column-gap: 45px;\n    row-gap: 8px;\n    width: 900px;\n}\n\n.player-label {\n    grid-column: 1 /2;\n    grid-row: 1 / 2;\n    font-size: 32px;\n    justify-self: center;\n}\n\n.axis-label {\n    font-size: 45px;\n    grid-column: 2 / 3;\n    grid-row: 1 / 2;\n    justify-self: center;\n}\n\n.ready-btn {\n    border-radius: 12px;\n    grid-column: 2 /3;\n    grid-row: 3 /4;\n}\n\n.reset-btn {\n    border-radius: 12px;\n    grid-column: 2/3;\n    grid-row: 4/5;\n}\n\n/*Boards*/\n.player-board {\n    display: flex;\n    flex-direction: column;\n    grid-row: 2 / 6;\n    grid-column: 1 / 2;\n    gap: 5px;\n}\n\n.colLetters {\n    display: flex;\n    gap: 5px;\n}\n\n.row-container {\n    display: flex;\n    gap: 5px;\n}\n\n.grid-square {\n    width: 50px;\n    height: 50px;\n    border: 1px solid rgba(148, 148, 148, 0.562);\n    cursor: crosshair;\n    background-color: rgba(0, 0, 0, 0.514);\n    border-radius: 8px;\n}\n\n.grid-square:hover {\n    background-color: rgba(73, 73, 73, 0.425);\n}\n\n.char-square,\n.row-num-square {\n    width: 50px;\n    height: 50px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid rgba(255, 255, 255, 0);\n}\n\n/*Ship selection*/\n\n.ships-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 8px;\n    justify-content: center;\n    grid-column: 2 /3;\n    grid-row: 2 / 4;\n}\n\n/*Ship Sprites*/\n.ship-sprite {\n    width: 175px;\n    height: auto;\n    margin: 0;\n}\n\n.ship-sprite:hover {\n    width: 200px;\n    height: auto;\n    cursor: grab;\n}\n\n.grabbing {\n    cursor: grabbing;\n}\n\n.active {\n    background-color: rgba(6, 255, 68, 0.185);\n}\n\n.set.forbidden,\n.forbidden {\n    background-color: red;\n}\n\n.player-one > .row-container > .set {\n    background-color: #180473;\n}\n\n.player-two > .row-container > .set {\n    background-color: #310020;\n}\n\n.placed {\n    filter: grayscale(100%);\n}\n\n.ship-sprite.carrier {\n    content: url(${S});\n}\n\n.ship-sprite.battleship {\n    content: url(${v});\n}\n\n.ship-sprite.destroyer {\n    content: url(${w});\n}\n\n.ship-sprite.submarine {\n    content: url(${x});\n}\n\n.ship-sprite.patrol_boat {\n    content: url(${C});\n}\n\n/*Game section */\n\n.player-boards-container {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr 6fr 1fr;\n    column-gap: 55px;\n}\n\n.msg-cntr {\n    grid-column: 1 / 3;\n    grid-row: 1/ 2;\n    font-size: 45px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.player-one.gamescreen {\n    grid-column: 1 / 2;\n    grid-row: 2 / 3;\n}\n\n.player-two.gamescreen {\n    grid-column: 2/3;\n    grid-row: 2/3;\n}\n\n.hit {\n    background-image: url(${E});\n    background-size: cover;\n}\n\n.miss {\n    background-color: rgba(148, 148, 148, 0.384);\n}\n\n.sunk {\n    background-image: url(${P});\n    background-size: cover;\n}\n\n.ready-btn-cntr {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.turn-ready-btn {\n    width: 90px;\n}\n\n.turn-ready-btn.player-one {\n    grid-column: 1 /2;\n    grid-row: 3 / 4;\n}\n\n.turn-ready-btn.player-two {\n    grid-column: 2 /3;\n    grid-row: 3 / 4;\n}\n`,""]);const M=b},373:(e,t,n)=>{e.exports=n.p+"ff766d5998f550c2a598.png"},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},470:(e,t,n)=>{e.exports=n.p+"7fcd599fa38a1b1906d3.gif"},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},890:(e,t,n)=>{e.exports=n.p+"15fa54496c3375696c9e.png"},907:(e,t,n)=>{e.exports=n.p+"33a29787d17194ba5535.png"}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0;class r{constructor(){}buildElement(e,t,n){const r=document.createElement(e);return r.className=t,r.textContent=n||"",r}buildArtistLink(){const e=this.buildElement("div","artist"),t=this.buildElement("a","artist-link","Background made by PxSprite");return t.setAttribute("href","https://www.artstation.com/pxsprite"),e.appendChild(t),e}buildMenuOptions(){const e=this.buildElement("div","menu-options-container"),t=this.buildElement("button","play-btn","Play (PvP Local)");return e.appendChild(t),e}#e(e){const t=Object.keys(e).length,n=this.buildElement("div","colLetters"),r=this.buildElement("div","char-square");n.appendChild(r);for(let e=0;e<t;e++){const t=String.fromCharCode(65+e),r=this.buildElement("div","char-square",t);n.appendChild(r)}return n}buildMsgCntr(){return this.buildElement("div","msg-cntr")}buildBoard(e){const t=Object.keys(e).length,n=this.buildElement("div","player-board"),r=this.#e(e);n.appendChild(r);for(let r=0;r<t;r++){const t=this.buildElement("div","row-num-square",r+1),s=this.buildElement("div","row-container");s.appendChild(t);for(let t=0;t<e[r].length;t++){const e=this.buildElement("div","grid-square");e.setAttribute("id",`r${r}c${t}`),s.appendChild(e)}n.appendChild(s)}return n}buildShipsSelectionContainer(e){const t=this.buildElement("div","ships-container");return e.forEach(e=>{const n=this.buildElement("img","ship-sprite");n.classList.add(e.name),n.setAttribute("ship_length",e.length),n.setAttribute("id",e.name),t.appendChild(n)}),t}}class s{#t=new r;buildMainMenu(){const e=this.#t.buildElement("div","main-menu"),t=this.#t.buildElement("div","main-title","Battleship"),n=this.#t.buildMenuOptions(),r=this.#t.buildArtistLink();return e.appendChild(t),e.appendChild(n),e.appendChild(r),e}buildPlayMenu(e,t,n){const r=this.#t.buildElement("div","play-menu"),s=this.#t.buildElement("div","player-label",`Player ${n}: Drag your ships to the board, press R to change axis.`),i=this.#t.buildBoard(e),a=1===n?"player-one":"player-two";i.classList.add(a);const o=this.#t.buildShipsSelectionContainer(t),l=this.#t.buildElement("button","ready-btn","Ready"),c=this.#t.buildElement("button","reset-btn","Reset Board"),d=this.#t.buildElement("div","axis-label","Axis: X");return r.appendChild(s),r.appendChild(d),r.appendChild(i),r.appendChild(o),r.appendChild(c),r.appendChild(l),r}buildGameMenu(e,t){const n=this.#t.buildElement("div","player-boards-container"),r=this.#t.buildElement("div","msg-cntr"),s=this.#t.buildBoard(e);s.classList.add("player-one"),s.classList.add("gamescreen");const i=this.#t.buildBoard(t);i.classList.add("player-two"),i.classList.add("gamescreen");const a=this.#t.buildElement("button","turn-ready-btn","Ready"),o=this.#t.buildElement("button","turn-ready-btn","Ready"),l=this.#t.buildElement("div","ready-btn-cntr"),c=this.#t.buildElement("div","ready-btn-cntr");return a.classList.add("player-one"),o.classList.add("player-two"),a.classList.add("hidden"),o.classList.add("hidden"),l.appendChild(a),c.appendChild(o),n.appendChild(r),n.appendChild(s),n.appendChild(i),n.appendChild(l),n.appendChild(c),n}}class i{#n=new s;#r=document.querySelector("body");clearBody(){for(;this.#r.firstChild;)this.#r.removeChild(this.#r.firstChild)}removeContainer(e){this.#r.removeChild(e)}renderMainMenu(){const e=this.#n.buildMainMenu();this.#r.appendChild(e)}renderPlayMenu(e,t,n){const r=this.#n.buildPlayMenu(e,t,n);this.clearBody(),this.#r.appendChild(r)}renderPlacedShips(e,t){const n=Object.keys(e).length;for(let r=0;r<n;r++)for(let n=0;n<e[r].length;n++){const s=e[r][n],i=document.querySelector(`.${t} > .row-container > #r${r}c${n}`);0!==s?(document.querySelector(`#${s.name}`)&&this.#s(s.name),i.classList.add("set")):i.classList.remove("set"),i.classList.remove("active"),i.classList.remove("forbidden")}}#s(e){document.querySelector(`#${e}`).classList.add("placed")}recolorShips(){document.querySelectorAll(".ship-sprite").forEach(e=>{e.classList.remove("placed")})}highlightAvailableSquares(e,t,n,r){const s=n.id.split(""),i=parseInt(s[1]),a=parseInt(s[3]),o=parseInt(e),l=parseInt(r.split("x")[0]);for(let n=0;n<e;n++){let e=null,r=a+n,s=i+n,c="x"===t&&a+o>l,d="y"===t&&i+o>l;if("x"===t){if(r>=l)return;e=document.querySelector(`#r${i}c${r}`)}else{if(s>=l)return;e=document.querySelector(`#r${s}c${a}`)}e.classList.contains("set")||c||d?e.classList.add("forbidden"):e.classList.add("active")}}clearActiveAndForbiddenSquares(){document.querySelectorAll(".grid-square").forEach(e=>{e.classList.remove("active"),e.classList.remove("forbidden")})}renderGameMenu(e,t){this.clearBody();const n=this.#n.buildGameMenu(e,t);this.#r.appendChild(n),this.renderPlacedShips(e,"player-one"),this.renderPlacedShips(t,"player-two")}renderSunkHits(e,t){const n=Object.keys(e).length;for(let r=0;r<n;r++)for(let n=0;n<e[r].length;n++){const s=e[r][n],i=document.querySelector(`.${t} > .row-container > #r${r}c${n}`);s.sunk&&i.classList.add("sunk")}}renderHits(e,t){e.forEach(e=>{const n=e[0],r=e[1];document.querySelector(`.${t} > .row-container > #r${n}c${r}`).classList.add("hit")})}renderMisses(e,t){e.forEach(e=>{const n=e[0],r=e[1];document.querySelector(`.${t} > .row-container > #r${n}c${r}`).classList.add("miss")})}hideShips(e){e.forEach(e=>{e.classList.remove("set")})}showShips(e){e.forEach(e=>{e.classList.add("set")})}}class a{constructor(e,t){this.gameboard=e,this.type=t}getBoard(){return this.gameboard.board}getBoardLength(){return Object.keys(this.getBoard()).length}}class o{constructor(e,t){this.name=t,this.length=e,this.hits=0,this.sunk=!1}hit(){return this.hits+=1}isSunk(){const e=this.hits>=this.length;return this.sunk=e,e}}class l{constructor(e){this.size=e,this.board=this.#i(this.size),this.length=Object.keys(this.board).length,this.placedShips=[],this.currentMessage="",this.misses=[],this.hits=[],this.sunkShips=[],this.shipCount=5}#i(e){const t=e.split("x"),n=t[0],r=t[1];let s={};for(let e=0;e<r;e++){s[e]=[];for(let t=0;t<n;t++)s[e][t]=0}return s}#a(e){return{y:e[0],x:e[1]}}allShipsSunk(){return this.sunkShips.length===this.shipCount}#o(e){return this.placedShips.find(t=>t===e)}allShipsArePlaced(){const e=this.placedShips.length===this.shipCount;return e&&this.changeCurrentMessage("All ships are placed"),e}clearCurrentMessage(){return this.currentMessage=""}changeCurrentMessage(e){return this.currentMessage=e}getCurrentMessage(){return this.currentMessage}getBoardLength(){return this.board.length}#l(e,t){let n=[];for(let r=e;r<this.length;r++)0===this.board[r][t]?n.push(0):n.push(1);let r=n.length;return n.includes(1)&&(r=n.slice(0,n.indexOf(1)).length),r}#c(e,t){let n=[];for(let r=t;r<this.length;r++)0===this.board[e][r]?n.push(0):n.push(1);let r=n.length;return n.includes(1)&&(r=n.slice(0,n.indexOf(1)).length),r}clearBoard(){this.board=this.#i(this.size),this.placedShips=[],this.currentMessage=""}placeShip(e,t,n,r){if(this.#o(e))return this.changeCurrentMessage("Ship already placed");const s=this.#a(n),i=s.x,a=s.y;if(0!==this.board[a][i])return this.changeCurrentMessage("Space already taken");const l=this.#c(a,i),c=this.#l(a,i),d=new o(t,e);if(d.length<=l&&"x"===r){this.board[a][i]=d;for(let e=0;e<d.length;e++)this.board[a][i+e]=d}else{if(!(d.length<=c&&"y"===r))return this.changeCurrentMessage("Ship doesn't fit in this square");this.board[a][i]=d;for(let e=0;e<d.length;e++)this.board[a+e][i]=d}this.placedShips.push(d.name),this.changeCurrentMessage(`Succesfully added ${d.name} on axis ${r}`)}receiveAttack(e){const t=this.#a(e),n=t.y,r=t.x,s=this.board[n][r];return 0===s?(this.changeCurrentMessage("Miss!"),this.misses.push(e)):(s.hit(),this.hits.push(e),this.changeCurrentMessage("Hit!"),s.isSunk()&&(this.sunkShips.push(s),this.changeCurrentMessage("Ship destroyed!")),this.allShipsSunk()?this.changeCurrentMessage("All ships are sunk"):void 0)}}class c{constructor(){this.gridSize="10x10",this.players=[],this.gamemodeShips=[{name:"carrier",length:5},{name:"battleship",length:4},{name:"destroyer",length:3},{name:"submarine",length:3},{name:"patrol_boat",length:2}],this.playerOneClassName="player-one",this.playerTwoClassName="player-two"}getPlayers(){return this.players}getPlayerOne(){return this.players[0]}getPlayerTwo(){return this.players[1]}getHits(e){const t=this.players[0].gameboard.hits,n=this.players[1].gameboard.hits;return"player-one"===e?t:n}getMisses(e){const t=this.players[0].gameboard.misses,n=this.players[1].gameboard.misses;return"player-one"===e?t:n}getShipList(){return this.gamemodeShips}createPlayer(e){return new a(new l(this.gridSize),e)}addPlayer(e){this.players.push(e)}placeShipOnPlayerBoard(e,t,n,r,s){e.placeShip(t,n,r,s)}clearPlayerBoard(e){e.clearBoard()}allShipsPlacedOnPlayerBoard(e){return e.allShipsArePlaced()}}const d=n.p+"449309101e1780d2e538.wav",h=n.p+"e83bd1886fd522f9767a.mp3",u=n.p+"38ed188424fb80a3e672.wav",p=n.p+"13c6c14ce6b8c085d0ac.wav",g=n.p+"adb41b622f3a2f9281d1.wav",y=n.p+"9d4a298d134d20fcd4fc.wav";class m{#d=new i;#h="player-one";#u="player-two";#p="Player 1";#g=[];#y=[];#m=!1;#b=!1;#f=!1;#S=new Audio(d);#v=new Audio(h);#w=new Audio(u);#x=new Audio(p);#C=new Audio(g);#E=new Audio(y);constructor(e){this.game=e}setInitialEvents(){this.saveSetSquares(),this.changeMsg(`${this.#p}: Get ready!`),this.#d.hideShips(this.#g),this.#d.hideShips(this.#y),this.setAttackEvent(),this.setTurnReadyEvent(),document.querySelector(".turn-ready-btn").classList.toggle("hidden")}saveSetSquares(){this.#g=document.querySelectorAll(`.${this.#h} > .row-container > .set`),this.#y=document.querySelectorAll(`.${this.#u} > .row-container > .set`)}setAttackEvent(){document.querySelectorAll(".grid-square").forEach(e=>{e.addEventListener("click",t=>{const n=t.target.id;this.setAttackLogic(e,n)})})}setTurnReadyEvent(){document.querySelectorAll(".turn-ready-btn").forEach(e=>{e.addEventListener("click",t=>{this.onReady(e)})})}onReady(e){this.#b||(this.#C.play(),this.changeMsg(`${this.#p}: It's your turn.`),"Player 1"===this.#p?(this.#d.showShips(this.#g),this.#d.hideShips(this.#y)):"Player 2"===this.#p&&(this.#d.showShips(this.#y),this.#d.hideShips(this.#g)),this.#m=!0,e.classList.toggle("hidden"))}setAttackLogic(e,t){if(!this.#m)return;const n=e.parentNode.parentNode;if(n.classList.contains("player-two")&&"Player 2"===this.#p)return this.changeMsg(`${this.#p}: Friendly Fire will not be tolerated, click the opponent's board.`),void this.#E.play();if(n.classList.contains("player-one")&&"Player 1"===this.#p)return this.changeMsg(`${this.#p}: Friendly Fire will not be tolerated, click the opponent's board.`),void this.#E.play();const r=this.game.getPlayerOne(),s=this.game.getPlayerTwo(),i=this.game.getHits(this.#h).join("-"),a=this.game.getHits(this.#u).join("-"),o=this.getCoordsArrFromId(t);n.classList.contains(this.#h)?i.includes(`${o}`)||this.attack(r.gameboard,this.#h,o):n.classList.contains(this.#u)&&(a.includes(`${o}`)||this.attack(s.gameboard,this.#u,o)),this.#f||(this.#m=!1,this.changeTurn(),this.#d.hideShips(this.#g),this.#d.hideShips(this.#y)),this.checkForWin(r,s),this.#b||this.#f||setTimeout(()=>this.changeMsg(`${this.#p}: Get ready!`),750),console.log(this.game.getPlayers())}attack(e,t,n){e.receiveAttack(n);const r=this.game.getHits(t),s=this.game.getMisses(t);this.#d.renderHits(r,t),this.#d.renderMisses(s,t),this.#d.renderSunkHits(e.board,t);const i=e.getCurrentMessage();this.changeMsg(i),"Hit!"===i?(this.#f=!0,this.#m=!0,new Audio(d).play(),this.changeMsg(`${this.#p}: Hit, Keep attacking!`)):"Ship destroyed!"===i?(this.#f=!0,this.#m=!0,new Audio(u).play()):"Miss!"===i&&(this.#f=!1,this.#v.play())}checkForWin(e,t){let n="";if(e.gameboard.allShipsSunk())n="GAME OVER: Player Two Wins";else{if(!t.gameboard.allShipsSunk())return;n="GAME OVER: Player One Wins"}this.#b=!0,this.#x.play();const r=this.game.playerOneClassName,s=this.game.playerTwoClassName;this.#d.clearBody(),this.#d.renderGameMenu(e.getBoard(),t.getBoard()),this.#d.renderHits(this.game.getHits(r),r),this.#d.renderHits(this.game.getHits(s),s),this.#d.renderMisses(this.game.getMisses(r),r),this.#d.renderMisses(this.game.getMisses(s),s),this.#d.renderSunkHits(e.getBoard(),r),this.#d.renderSunkHits(t.getBoard(),s),this.changeMsg(n)}getCoordsArrFromId(e){const t=e.split(""),n=t[1],r=t[3];return JSON.parse(`[${n}, ${r}]`)}clearMsg(){document.querySelector(".msg-cntr").textContent=""}changeMsg(e){document.querySelector(".msg-cntr").textContent=e}toggleReadyBtn(){const e="Player 1"===this.#p?this.#h:this.#u;document.querySelector(`.turn-ready-btn.${e}`).classList.toggle("hidden")}changeTurn(){this.#p="Player 1"===this.#p?"Player 2":"Player 1","Player 1"===this.#p?this.toggleReadyBtn(this.#u):"Player 2"===this.#p&&this.toggleReadyBtn(this.#h)}}n.p;const b=n.p+"4f61c011ce3549e17c4e.mp3",f=n.p+"b1cfa6702e8dfabe543b.mp3",S=n.p+"d8f91b102674aec789b3.mp3";class v{#d=new i;#P=new c;#M=new m(this.#P);#r=document.querySelector("body");#k="x";#A="";#L=0;#q="";#T=!1;#O=new Audio(b);#$=new Audio(f);#B=new Audio(S);setInitialEvents(){this.setPlayEvents(),this.setKeyEvents(),this.setMenuAudio()}setMenuAudio(){this.setButtonAudio()}setButtonAudio(){document.querySelectorAll("button").forEach(e=>{e.addEventListener("click",e=>{this.#O.play()})})}setDragEvents(){const e=document.querySelectorAll(".ship-sprite"),t=document.querySelectorAll(".grid-square"),n=document.querySelector(".player-board");let r=null;n.addEventListener("dragleave",e=>{this.#d.clearActiveAndForbiddenSquares()}),e.forEach(e=>{e.addEventListener("dragstart",e=>{r=e.target})}),t.forEach(e=>{e.addEventListener("dragover",e=>{e.preventDefault(),this.onDragOver(e,r)}),e.addEventListener("drop",e=>{e.preventDefault(),this.onDrop(e,r)})})}setPlayEvents(){document.querySelector(".play-btn").addEventListener("click",()=>{this.play(),this.setDragEvents(),this.setResetBoardEvent(),this.setReadyPlayerOneEvent(),this.placeShipsForTest()})}setReadyPlayerOneEvent(){document.querySelector(".ready-btn").addEventListener("click",()=>{this.#O.play(),this.#T?(this.#d.clearBody(),this.play(),this.setDragEvents(),this.setResetBoardEvent(),this.#T=!1,this.setReadyPlayerTwoEvent(),this.placeShipsForTest()):(this.changePlayerMsg("Ships are not ready"),this.resetMsg(1e3))})}setReadyPlayerTwoEvent(){document.querySelector(".ready-btn").addEventListener("click",()=>{this.#O.play(),this.#T?this.startGame():(this.changePlayerMsg("Ships are not ready"),this.resetMsg(1e3))})}setResetBoardEvent(){document.querySelector(".reset-btn").addEventListener("click",()=>{this.#O.play(),this.#T=!1;const e=this.#P.getPlayers()[this.#L-1];this.#P.clearPlayerBoard(e.gameboard),this.#d.recolorShips(),this.#d.renderPlacedShips(e.getBoard(),this.#q),this.resetMsg(0)})}setKeyEvents(){this.#r.addEventListener("keydown",e=>{null!==document.querySelector(".axis-label")&&"r"===e.key&&(this.#$.play(),"x"===this.#k?this.#k="y":this.#k="x",this.#A=`Axis: ${this.#k.toUpperCase()}`,document.querySelector(".axis-label").textContent=this.#A)})}play(){this.#L+=1,this.#q=1===this.#L?"player-one":"player-two";const e=this.#P.getShipList(),t=this.#P.createPlayer("human");this.#P.addPlayer(t),this.#d.renderPlayMenu(t.getBoard(),e,this.#L)}onDrop(e,t){const n=e.target;n.classList.contains("active")&&n.classList.remove("active");const r=this.#P.getPlayers()[this.#L-1],s=n.id.split(""),i=s[1],a=s[3],o=JSON.parse(`[${i}, ${a}]`),l=t.getAttribute("ship_length"),c=t.id;this.#P.placeShipOnPlayerBoard(r.gameboard,c,l,o,this.#k),this.#d.renderPlacedShips(r.getBoard(),this.#q),this.#P.allShipsPlacedOnPlayerBoard(r.gameboard)&&(this.#T=!0,this.changePlayerMsg("All ships are ready for battle")),this.#B.play()}onDragOver(e,t){this.#d.clearActiveAndForbiddenSquares();const n=e.target,r=t.getAttribute("ship_length"),s=this.#P.gridSize;this.#d.highlightAvailableSquares(r,this.#k,n,s)}startGame(){const e=this.#P.getPlayers(),t=e[0],n=e[1];this.#d.renderGameMenu(t.getBoard(),n.getBoard()),this.#M.setInitialEvents()}placeShipsForTest(){const e=this.#P.getPlayers()[this.#L-1],t=this.#P.gamemodeShips,n=[[0,0],[2,0],[4,0],[6,0],[8,0]];for(let r=0;r<t.length;r++)this.#P.placeShipOnPlayerBoard(e.gameboard,t[r].name,t[r].length,n[r],"x");this.#d.renderPlacedShips(e.getBoard(),this.#q),this.#P.allShipsPlacedOnPlayerBoard(e.gameboard)&&(this.#T=!0),console.log(e.gameboard.getCurrentMessage())}resetMsg(e){setTimeout(()=>this.changePlayerMsg(`Player ${this.#L}: Drag your ships to the board, press R to change axis.`),e)}changePlayerMsg(e,t){document.querySelector(".player-label").textContent=e}}var w=n(72),x=n.n(w),C=n(825),E=n.n(C),P=n(659),M=n.n(P),k=n(56),A=n.n(k),L=n(540),q=n.n(L),T=n(113),O=n.n(T),$=n(365),B={};B.styleTagTransform=O(),B.setAttributes=A(),B.insert=M().bind(null,"head"),B.domAPI=E(),B.insertStyleElement=q(),x()($.A,B),$.A&&$.A.locals&&$.A.locals,(new class{#d=new i;#R=new v;#M=new m;run(){this.#d.renderMainMenu(),this.#R.setInitialEvents()}}).run()})();